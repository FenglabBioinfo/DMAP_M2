################################################################

DMAP_M2 - A robust and rapid candidate gene mapping pipeline based on M2 populations.

Northeast Institute of Geography and Agroecology
Chinese Academy of Sciences

hkzhou@genedenovo.com
tangkuanqiang@iga.ac.cn
Version: 1.0, Date: 2020-12-15

################################################################

1. DMAP_M2.pl
Usage:
	perl DMAP_M2.pl --vcf <vcf> --index <chrome_length>  --BulkMut <string> --BulkWild <string> --win <int> --step <int>
	or
	perl DMAP_M2.pl --vcf <vcf> --index <chrome_length>  --BulkMut <string> --BulkWild <string> --slideSNP <int> 	
Parameterï¼š
	--vcf/-f	input file of VCF type
	--index/-i	Chrome length which can generated by samtools software. The first column was the chromosome name, and the second column was the total length of the chromosome.
	--BulkMut/-m	Mutant bulk name in input file
	--BulkWild/-n	Wild bulk name in input file 
	--win/-w	Slide window, default 1000000
	--background_varation/-c	The VCF type file including the common variation
	--annotataion/-a	The annotation file from ANNOVAR software
	--slideSNP/l	The number of SNP in one window.
	--help/-h	Help	
Example:
	1.Slide window by predefined SNP number:
	perl DMAP_M2.pl --vcf ./Example/SNP.vcf.gz --index ./Example/gmx.fa.fai --BulkMut mutant --BulkWild wild --slideSNP 1 --out ./Example/out
	perl DMAP_M2.pl --vcf ./Example/SNP.vcf.gz --index ./Example/gmx.fa.fai --BulkMut mutant --BulkWild wild --slideSNP 1 --out ./Example/out --background_varation ./Example/background.vcf.gz --annotataion ./Example/SNP.annot.xls
	
	2.Slide window by predefined window length:
	perl DMAP_M2.pl --vcf ./Example/SNP.vcf.gz --index ./Example/gmx.fa.fai --BulkMut mutant --BulkWild wild --win 1000000 --step 500000 --out ./Example/out
	perl DMAP_M2.pl --vcf ./Example/SNP.vcf.gz --index ./Example/gmx.fa.fai --BulkMut mutant --BulkWild wild --win 1000000 --step 500000 --out ./Example/out --background_varation ./Example/background.vcf.gz --annotataion ./Example/SNP.annot.xls
Note:
	The script was the core script of DMAP-M2 method. The index value of mutant and wild type bulk, delta index value and absoluted delta index value in each variation and window can be calculated. And the chart of index values of all chromosomes can be also plotted. The annotation file in the input parameter was optional. If the annotaion file exists, the out file will contain the annotion infomation.
	
2. find_background_variation.pl 
Usage:
	perl find_background_variation.pl -i <vcf> -o <vcf> [options]
	--population_genotype  -i	The input file of VCF type contains the variation of all samples.
	--output -o	The out file of VCF type, including the common variation.
	--population_kinship   -c	The file contain 2 column 
                The first column show the family or segragation population of the sample,
                and the second column show the sample name.
Exmple:
	perl find_background_variation.pl --population_genotype ./Example/background.vcf.gz --output ./Example/common_background_variation.vcf.gz
	perl find_background_variation.pl --population_genotype ./Example/background.vcf.gz --output ./Example/common_background_variation.vcf.gz --population_kinship ./Example/sample.conf
Note:
	The script can obtain the variation which happened at least in two samples or at least in two segeragation population if the sample configure file existed. The sample configure file was optional.

3. merge_background_variation.pl 
Usage:
	perl merge_background_variation.pl  --background <vcf1> --background <vcf2> --output <vcf> [options]
	--background	-i	Input VCF files
	--output	-o	Output VCF files
	--help		-h	Help
	--version	-v	Version of the script
Example:
	perl merge_background_variation.pl --background ./Example/background1.vcf.gz  --background ./Example/background2.vcf.gz   --output ./Example/background.merge.vcf.gz
Note:
	The script is to get the common variations which happened in two or more VCF type files.
